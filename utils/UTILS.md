# A directory for storing various utility files (CLI)
These files will be backend support files for SubsBuzz
They should use python by default unless there's a strong reason not to
We will manage this through a .venv in the ./utils directory
We will use Python 3.12x

## Utility Function: Post-populate
Function: populate a user's history DB with summaries for past-days. This will allow a user to add in email summary history for up to 10 days in the past. The data will be added directly into the system DB allowing the user to view each day's (UTC 24 hours) history in the application.

The utlity will use the exact same methodology of the app:
    - scanning the inbox for the sender addresses
    - pre-processing the contents
    - submitting to OpenAI for analysis
    - using the summary methodology and topic identification
    - write to the DB

Essentially it is running a backend version of the app. Results viewed in the app should be identical to those generated by the app itself.

Usage: sb-make-history.py --days [NUM_DAYS] --user [USERNAME] --email-exlcude [LIST_EMAIL_SOURCES_TO_NOT_INCLUDE]

Will use Google OAuth the authenitcate the USERNAME (email address) by launching a browser and returning an auth key

Will over-write any days in the DB with existing summaries.

Will provide progress updates to the CLI as it progresses. Something like:
<EXAMPLE OUTPUT>
user: tmattoneill@gmail.com
sender: sender@example.com
Generating X days of summaries
Now processsing: 2025-06-25...

Upon completion, verify that each day has been updated in the postgresql db.

## Utility Function: Command Line Viewer
Function: View a Summary for a specific user on a day or days. Pulls from the database. If no match, output "No Summary for YYYY-MM-DD for user <username>". Maximum 10 days history.

Usage: sb-user-history.py --days [NUM_DAYS: 1] --from-date [DATE_TO_LOOK_BACK_FROM: TODAY] --head [LINE_TO_DISPLAY: 10] --user [USERNAME]

ERROR CHECKING:
If no user found in DB return "No user <username> found."
If no data found return "No summaries found for that user in that date span"

<EXAMPLE OUTPUT>
User: username@example.com
==========================
Date: 2025-07-02
Summary:
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer quis pretium ante. Duis iaculis dictum nibh. Cras scelerisque lobortis sapien sit amet convallis. Nunc enim erat, consequat a venenatis quis, iaculis eu odio. Ut at iaculis felis. Praesent lacinia, tellus viverra maximus dictum, quam nibh auctor justo, eu tristique purus augue ut dui. Nam congue urna massa, eget semper diam malesuada eget. Curabitur eget luctus nulla, et maximus libero. Sed dictum orci id erat vehicula consectetur. Quisque iaculis iaculis augue in blandit. Nunc mattis neque eget faucibus porta. Aliquam gravida urna ut nisi auctor, id sodales neque iaculis. Curabitur auctor massa vel tempus sodales.

Aliquam commodo dictum commodo. Nunc odio mauris, lacinia vitae urna eget, interdum finibus nulla. Nulla et efficitur purus. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Duis sollicitudin eget ex vitae laoreet. Fusce nec velit posuere, porta velit in, convallis lectus. Sed.
...
-----
Date: 2025-07-01
Summary:
Praesent lacinia, tellus viverra maximus dictum, quam nibh auctor justo, eu tristique purus augue ut dui. Nam congue urna massa, eget semper diam malesuada eget. Curabitur eget luctus nulla, et maximus libero. Sed dictum orci id erat vehicula consectetur. Quisque iaculis iaculis augue in blandit. Nunc mattis neque eget faucibus porta. Aliquam gravida urna ut nisi auctor, id sodales neque iaculis. Curabitur auctor massa vel tempus sodales.
...

The script will pull this from the Postgresql DB only. 