# 🔒 Security Configuration Guide

## Environment Variables

All sensitive credentials are managed through environment variables. **Never commit sensitive data to git.**

### File Structure

- `.env.example` - Template showing all required variables
- `.env.dev` - Development environment (included for local setup)
- `.env.prod` - Production environment (you must create this)
- `.env` - Active environment file (auto-generated by npm scripts)

### Required Environment Variables

#### OpenAI Configuration
```bash
OPENAI_API_KEY=sk-proj-your_key_here
```

#### Google OAuth Credentials
```bash
GOOGLE_CLIENT_ID=your_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your_secret_here
```

#### Firebase Server Configuration
```bash
FIREBASE_PROJECT_ID=your_project_id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_KEY\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your_project.iam.gserviceaccount.com
```

#### Firebase Client Configuration (for Frontend)
```bash
VITE_FIREBASE_API_KEY=your_web_api_key
VITE_FIREBASE_PROJECT_ID=your_project_id
VITE_FIREBASE_APP_ID=1:123456789:web:your_app_id
```

## Development Setup

1. **Copy environment template:**
   ```bash
   cp .env.example .env.dev
   ```

2. **Fill in your development credentials in `.env.dev`**

3. **Run development server:**
   ```bash
   npm run dev  # Automatically uses .env.dev
   ```

## Production Setup

1. **Create production environment:**
   ```bash
   cp .env.example .env.prod
   ```

2. **Fill in your production credentials in `.env.prod`**

3. **Deploy:**
   ```bash
   npm run build    # Uses .env.prod
   npm run start    # Production server
   ```

## Security Best Practices

✅ **DO:**
- Use environment variables for all secrets
- Keep `.env.dev` and `.env.prod` files secure
- Rotate API keys regularly
- Use different credentials for dev/staging/prod

❌ **DON'T:**
- Commit `.env*` files (except `.env.example`)
- Hardcode credentials in source code
- Share environment files via email/chat
- Use production credentials in development

## Credential Sources

### OpenAI API Key
- Get from: https://platform.openai.com/api-keys
- Format: `sk-proj-...`

### Google OAuth Credentials
- Get from: https://console.cloud.google.com/apis/credentials
- Enable Gmail API and Google+ API

### Firebase Credentials
- Get from: https://console.firebase.google.com/
- Go to Project Settings > Service Accounts
- Generate new private key for server credentials
- Use Web app config for client credentials

## Troubleshooting

If you see authentication errors:
1. Verify all environment variables are set
2. Check that Firebase project ID matches across server/client
3. Ensure OAuth redirect URIs match your Google Console settings
4. Confirm API keys are valid and not expired